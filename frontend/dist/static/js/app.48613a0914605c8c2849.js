webpackJsonp([1],{"6MWa":function(e,t){},"7Otq":function(e,t,r){e.exports=r.p+"static/img/logo.2c408c1.png"},"8em/":function(e,t){},Bh49:function(e,t){},BtVI:function(e,t){},FsJg:function(e,t,r){var s={"./cat":"MGUO","./cat.js":"MGUO","./cd":"OkV7","./cd.js":"OkV7","./chmod":"thPH","./chmod.js":"thPH","./common":"8y2q","./common.js":"8y2q","./cp":"kEp2","./cp.js":"kEp2","./dirs":"lK6y","./dirs.js":"lK6y","./echo":"IRJ8","./echo.js":"IRJ8","./error":"HxTw","./error.js":"HxTw","./exec":"VQ1x","./exec.js":"VQ1x","./find":"r+ID","./find.js":"r+ID","./grep":"T3mR","./grep.js":"T3mR","./head":"jMmx","./head.js":"jMmx","./ln":"4Bxg","./ln.js":"4Bxg","./ls":"MULN","./ls.js":"MULN","./mkdir":"3ORl","./mkdir.js":"3ORl","./mv":"PcVt","./mv.js":"PcVt","./popd":"h3Dv","./popd.js":"h3Dv","./pushd":"PGBa","./pushd.js":"PGBa","./pwd":"+UCj","./pwd.js":"+UCj","./rm":"EaF0","./rm.js":"EaF0","./sed":"/j+X","./sed.js":"/j+X","./set":"c0cj","./set.js":"c0cj","./sort":"yc2b","./sort.js":"yc2b","./tail":"i//j","./tail.js":"i//j","./tempdir":"RvNk","./tempdir.js":"RvNk","./test":"U9dR","./test.js":"U9dR","./to":"xlaY","./to.js":"xlaY","./toEnd":"Lk2e","./toEnd.js":"Lk2e","./touch":"0Qa2","./touch.js":"0Qa2","./uniq":"lTxy","./uniq.js":"lTxy","./which":"GiAy","./which.js":"GiAy"};function n(e){return r(o(e))}function o(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}n.keys=function(){return Object.keys(s)},n.resolve=o,e.exports=n,n.id="FsJg"},Gojk:function(e,t){},HAIC:function(e,t){},KJJ6:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("7+uW"),n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",[s("img",{attrs:{src:r("7Otq"),width:"60px",height:"auto"}}),e._v(" "),s("div",{staticClass:"block"},[e.isActive("/home")?s("div",{staticClass:"chosen"},[e._v(">>")]):e._e(),e._v(" "),s("router-link",{attrs:{to:"/home"}},[e._v("主页")]),e._v(" "),e.isActive("/home")?s("div",{staticClass:"chosen"},[e._v("<<")]):e._e()],1),e._v(" "),s("div",{staticClass:"block"},[e.isActive("/projects")?s("div",{staticClass:"chosen"},[e._v(">>")]):e._e(),e._v(" "),s("router-link",{attrs:{to:"/projects"}},[e._v("实验")]),e._v(" "),e.isActive("/projects")?s("div",{staticClass:"chosen"},[e._v("<<")]):e._e()],1),e._v(" "),s("div",{staticClass:"block"},[e.isActive("/user")?s("div",{staticClass:"chosen"},[e._v(">>")]):e._e(),e._v(" "),s("router-link",{attrs:{to:"/user"}},[e._v("我的")]),e._v(" "),e.isActive("/user")?s("div",{staticClass:"chosen"},[e._v("<<")]):e._e()],1)])},staticRenderFns:[]};var o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",[r("active",{class:{active:e.isActive("/user"),disactive:!e.isActive("/user")}},[r("router-link",{attrs:{to:"/user"}},[e._v("个人主页")])],1),e._v(" "),r("active",{class:{active:e.isActive("/user/launched"),disactive:!e.isActive("/user/launched")}},[r("router-link",{attrs:{to:"/user/launched"}},[e._v("已发布")])],1),e._v(" "),r("active",{class:{active:e.isActive("/user/applied"),disactive:!e.isActive("/user/applied")}},[r("router-link",{attrs:{to:"/user/applied"}},[e._v("已申请")])],1)],1)},staticRenderFns:[]};var a={name:"App",components:{Header:r("VU/8")({name:"Header",methods:{isActive:function(e){return this.$route.path.startsWith(e)}}},n,!1,function(e){r("gQwh")},"data-v-304615ce",null).exports,UserHeader:r("VU/8")({name:"Header",methods:{isActive:function(e){return this.$route.path===e}}},o,!1,function(e){r("BtVI")},"data-v-0b3ccd1e",null).exports},data:function(){return{showSidebar:!1}},watch:{$route:function(e){this.showSidebar=this.checkRoute(e)}},created:function(){this.showSidebar=this.checkRoute(this.$route)},methods:{checkRoute:function(e){return["/user","/user/launched","/user/applied"].includes(e.path)}}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("Header"),this._v(" "),this.showSidebar?t("UserHeader"):this._e(),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var c=r("VU/8")(a,i,!1,function(e){r("UGzv")},null,null).exports,l=r("/ocq"),u={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("Welcome to the Volunteer Platform")]),this._v(" "),t("h1",[this._v("Find and join exciting research projects!")])])}]};var d=r("VU/8")({name:"Home"},u,!1,function(e){r("KJJ6")},"data-v-2d5125e9",null).exports,p=r("Xxa5"),v=r.n(p),m=r("mvHQ"),h=r.n(m),f=r("exGp"),_=r.n(f),g=(r("YW59"),r("//Fk")),j=r.n(g),y=r("mtWM"),w=y.a.create({withCredentials:!0});w.interceptors.request.use(function(e){e.headers["X-Requested-With"]="XMLHttpRequest";var t=/.*csrftoken=([^;.]*).*$/;return e.headers["X-CSRFToken"]=null===document.cookie.match(t)?null:document.cookie.match(t)[1],e}),w.interceptors.response.use(function(e){return e},function(e){return j.a.reject(e)}),s.a.prototype.axios=w;var b=w,C="http://127.0.0.1:8000",x=function(e,t){return b.post(C+"/relations/engage/",{experiment:t},{headers:{Authorization:"Bearer "+e}},{withCredentials:!0})},k=function(e,t,r,s,n,o,a,i,c){return b.post(C+"/experiments/"+t+"/",{id:r,title:s,activity_time:n,activity_location:o,person_wanted:a,money_per_person:i,description:c},{headers:{Authorization:"Bearer "+e}},{withCredentials:!0})},A=r("NMjF"),P={name:"Login",data:function(){return{email:"",password:"",username:"",remember:!1}},methods:{getRsaCode:function(e){var t=new A.a;return t.setPublicKey("-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmIzophqDebSpnL77RK0l\n6l8TECsiW7t1+7ilLuc0OtPBFgRaIyEUhjV90XY1LJcWZ3UmdZ77GBoHRcZa0UAE\n8DF7seDu2yyXy2xE0i4gFo41WhOwIkV0SVlT7hQ+llf2w8Nk48efjjpz9v5Nf62I\nVxRBcDQq3BUbvq/ZHbkUs7jiAIp2DeW4FBL3gj7C4yaCkis0HOHFSqCGxDfDr8Vg\nY9quJIoKfLDqMeXylBICW9tAdUSBC6nf8fdiFflvdenVb1VhZ64oseJMp+8Bqt5R\nwTHjucdOXlXbhM+pooTEKu+FyVQcwbwkjL0MM8SnZcfozP9ZAlSiO+5vewrqiOhB\nNwIDAQAB\n-----END PUBLIC KEY-----"),t.encrypt(e.toString())},login:function(){var e=this;return _()(v.a.mark(function t(){var r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s=e.email,n=e.getRsaCode(e.password),b.post(C+"/users/login/",{email:s,password_encrypted:n},{withCredentials:!0});case 3:r=t.sent,alert("登录成功"),localStorage.setItem("loginFlag","true"),localStorage.setItem("user",h()(r.data.user)),localStorage.setItem("access",h()(r.data.access)),console.log("用户信息",h()(r.data.user)),console.log("令牌",h()(r.data.access)),e.$router.push("/user"),t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(0),alert(t.t0.response.data.detail),console.log(t.t0.response.data.detail),t.abrupt("return",null);case 18:case"end":return t.stop()}var s,n},t,e,[[0,13]])}))()}}},V={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-container"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[r("h2",[e._v("登录")]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"email"}},[e._v("邮箱")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",id:"email",required:"",oninvalid:"this.setCustomValidity('请输入邮箱')",oninput:"this.setCustomValidity('')"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"password"}},[e._v("密码")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password",required:"",oninvalid:"this.setCustomValidity('请输入密码')",oninput:"this.setCustomValidity('')"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group form-inline"},[r("router-link",{attrs:{to:"/register"}},[e._v("注册")]),e._v(" "),r("div",{staticClass:"form-inline"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.remember,expression:"remember"}],attrs:{type:"checkbox",id:"remember"},domProps:{checked:Array.isArray(e.remember)?e._i(e.remember,null)>-1:e.remember},on:{change:function(t){var r=e.remember,s=t.target,n=!!s.checked;if(Array.isArray(r)){var o=e._i(r,null);s.checked?o<0&&(e.remember=r.concat([null])):o>-1&&(e.remember=r.slice(0,o).concat(r.slice(o+1)))}else e.remember=n}}}),e._v(" "),r("label",{attrs:{for:"remember"}},[e._v("记住我")])])],1),e._v(" "),r("button",{attrs:{type:"submit"}},[e._v("登录")])])])},staticRenderFns:[]};var I=r("VU/8")(P,V,!1,function(e){r("Sogh")},"data-v-00480e37",null).exports,B={name:"Register",data:function(){return{username:"",email:"",password:""}},methods:{getRsaCode:function(e){var t=new A.a;return t.setPublicKey("-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmIzophqDebSpnL77RK0l\n6l8TECsiW7t1+7ilLuc0OtPBFgRaIyEUhjV90XY1LJcWZ3UmdZ77GBoHRcZa0UAE\n8DF7seDu2yyXy2xE0i4gFo41WhOwIkV0SVlT7hQ+llf2w8Nk48efjjpz9v5Nf62I\nVxRBcDQq3BUbvq/ZHbkUs7jiAIp2DeW4FBL3gj7C4yaCkis0HOHFSqCGxDfDr8Vg\nY9quJIoKfLDqMeXylBICW9tAdUSBC6nf8fdiFflvdenVb1VhZ64oseJMp+8Bqt5R\nwTHjucdOXlXbhM+pooTEKu+FyVQcwbwkjL0MM8SnZcfozP9ZAlSiO+5vewrqiOhB\nNwIDAQAB\n-----END PUBLIC KEY-----"),t.encrypt(e.toString())},register:function(){var e=this;return _()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r=e.email,s=e.username,n=e.getRsaCode(e.password),b.post(C+"/users/register/",{email:r,username:s,password_encrypted:n},{withCredentials:!0});case 3:alert("注册成功"),e.$router.push("/login"),t.next=12;break;case 7:return t.prev=7,t.t0=t.catch(0),alert(t.t0.response.data.detail),console.log(t.t0.response.data.detail),t.abrupt("return",null);case 12:case"end":return t.stop()}var r,s,n},t,e,[[0,7]])}))()}}},q={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register-container"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.register.apply(null,arguments)}}},[r("h2",[e._v("注册")]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"username"}},[e._v("用户名")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",id:"username",required:"",oninvalid:"this.setCustomValidity('请输入用户名')",oninput:"this.setCustomValidity('')"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"email"}},[e._v("邮箱")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",id:"email",required:"",oninvalid:"this.setCustomValidity('请输入正确的邮箱')",oninput:"this.setCustomValidity('')"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"password"}},[e._v("密码")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password",required:"",oninvalid:"this.setCustomValidity('请输入密码')",oninput:"this.setCustomValidity('')"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group form-inline"},[r("router-link",{attrs:{to:"/login"}},[e._v("登录")])],1),e._v(" "),r("button",{attrs:{type:"submit"}},[e._v("注册")])])])},staticRenderFns:[]};var E=r("VU/8")(B,q,!1,function(e){r("jXzV")},"data-v-01a8ef8f",null).exports,F=r("bOdI"),S=r.n(F),R={data:function(){return{user:{avatar:"",username:"",email:"",introduction:""},defaultAvatar:r("7Otq"),editingField:null,editingValue:"",oldPassword:"",newPassword:"",fields:[{name:"username",label:"用户名",labelchange:"修改用户名："},{name:"password",label:"密码",labelchange:"修改密码："},{name:"email",label:"邮箱",labelchange:"修改绑定邮箱："},{name:"introduction",label:"个人简介",labelchange:"修改个人简介："}]}},created:function(){var e=this;this.user=JSON.parse(localStorage.getItem("user"));var t,r=this.user.username;(t=r,console.log(C+"/users/detail/?username="+t+"/"),b.get(C+"/users/detail/?username="+t,{withCredentials:!0})).then(function(t){e.user.introduction=t.data.introduction,console.log(t.data.introduction),console.log(e.user.introduction),e.user.username="",e.user.username=r}).catch(function(e){console.error("Error fetching user data:",e)})},methods:{getRsaCode:function(e){var t=new A.a;return t.setPublicKey("-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmIzophqDebSpnL77RK0l\n6l8TECsiW7t1+7ilLuc0OtPBFgRaIyEUhjV90XY1LJcWZ3UmdZ77GBoHRcZa0UAE\n8DF7seDu2yyXy2xE0i4gFo41WhOwIkV0SVlT7hQ+llf2w8Nk48efjjpz9v5Nf62I\nVxRBcDQq3BUbvq/ZHbkUs7jiAIp2DeW4FBL3gj7C4yaCkis0HOHFSqCGxDfDr8Vg\nY9quJIoKfLDqMeXylBICW9tAdUSBC6nf8fdiFflvdenVb1VhZ64oseJMp+8Bqt5R\nwTHjucdOXlXbhM+pooTEKu+FyVQcwbwkjL0MM8SnZcfozP9ZAlSiO+5vewrqiOhB\nNwIDAQAB\n-----END PUBLIC KEY-----"),t.encrypt(e.toString())},triggerFileInput:function(){this.$refs.fileInput.click()},uploadAvatar:function(e){var t=this,r=e.target.files[0],s=new FormData;s.append("avatar",r),y.a.post("/api/upload-avatar",s).then(function(e){t.user.avatar=e.data.avatarUrl}).catch(function(e){console.error("上传头像失败",e)})},editField:function(e){this.editingField=e,this.editingValue=this.user[e]},saveField:function(){var e=this,t=JSON.parse(localStorage.getItem("access"));"password"===this.editingField?(console.log(this.oldPassword,this.newPassword),function(e,t,r){return console.log(e,t,r),b.post(C+"/users/profile/edit/",{old_password_encrypted:t,new_password_encrypted:r},{headers:{Authorization:"Bearer "+e}},{withCredentials:!0})}(t,this.getRsaCode(this.oldPassword),this.getRsaCode(this.newPassword)).then(function(){alert("密码更新成功"),e.editingField=null,e.oldPassword="",e.newPassword=""}).catch(function(e){console.error("更新密码失败",e)})):function(e,t){return console.log(t),b.post(C+"/users/profile/edit/",t,{headers:{Authorization:"Bearer "+e}},{withCredentials:!0})}(t,S()({},this.editingField,this.editingValue)).then(function(){e.user[e.editingField]=e.editingValue,localStorage.setItem(e.editingField,e.editingValue),alert("用户信息更新成功"),e.editingField=null}).catch(function(e){console.error("更新用户信息失败",e)})},cancelEdit:function(){this.editingField=null,this.editingValue="",this.oldPassword="",this.newPassword=""},logout:function(){localStorage.setItem("loginFlag","false"),localStorage.setItem("user",null),this.$router.push("/")}}},U={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-center"},[r("h2",[e._v("个人中心")]),e._v(" "),r("div",{staticClass:"left-section"},[r("div",{staticClass:"avatar-section"},[r("img",{attrs:{src:e.user.avatar||e.defaultAvatar,alt:"User Avatar"}}),e._v(" "),r("button",{staticClass:"sort-button edit-button",on:{click:e.triggerFileInput}},[e._v("修改")]),e._v(" "),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.uploadAvatar}})]),e._v(" "),r("div",{staticClass:"info-section"},e._l(e.fields,function(t){return r("div",{key:t.name,staticClass:"info-item"},[r("div",{staticClass:"info-row"},[r("span",{staticClass:"label"},[e._v(e._s(t.label)+":")]),e._v(" "),r("span",{staticClass:"value"},[e._v(e._s("password"===t.name?"******":e.user[t.name]))]),e._v(" "),r("button",{staticClass:"sort-button",on:{click:function(r){return e.editField(t.name)}}},[e._v("修改")])]),e._v(" "),e.editingField===t.name?r("div",{staticClass:"edit-section"},[r("label",{attrs:{for:t.name}},[e._v(e._s(t.labelchange))]),e._v(" "),r("div",{staticClass:"edit-row"},["password"===t.name?r("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword,expression:"oldPassword"}],attrs:{type:"password",placeholder:"旧密码"},domProps:{value:e.oldPassword},on:{input:function(t){t.target.composing||(e.oldPassword=t.target.value)}}}):e._e(),e._v(" "),"password"===t.name?r("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],attrs:{type:"password",placeholder:"新密码"},domProps:{value:e.newPassword},on:{input:function(t){t.target.composing||(e.newPassword=t.target.value)}}}):"checkbox"==("password"===t.name?"password":"text")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.editingValue,expression:"editingValue"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.editingValue)?e._i(e.editingValue,null)>-1:e.editingValue},on:{change:function(t){var r=e.editingValue,s=t.target,n=!!s.checked;if(Array.isArray(r)){var o=e._i(r,null);s.checked?o<0&&(e.editingValue=r.concat([null])):o>-1&&(e.editingValue=r.slice(0,o).concat(r.slice(o+1)))}else e.editingValue=n}}}):"radio"==("password"===t.name?"password":"text")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.editingValue,expression:"editingValue"}],attrs:{type:"radio"},domProps:{checked:e._q(e.editingValue,null)},on:{change:function(t){e.editingValue=null}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.editingValue,expression:"editingValue"}],attrs:{type:"password"===t.name?"password":"text"},domProps:{value:e.editingValue},on:{input:function(t){t.target.composing||(e.editingValue=t.target.value)}}}),e._v(" "),r("button",{staticClass:"sort-button",on:{click:e.saveField}},[e._v("保存")]),e._v(" "),r("button",{staticClass:"sort-button",on:{click:e.cancelEdit}},[e._v("取消")])])]):e._e()])}),0)]),e._v(" "),r("button",{staticClass:"sort-button",on:{click:e.logout}},[e._v("退出登录")])])},staticRenderFns:[]};var O=r("VU/8")(R,U,!1,function(e){r("fkg4")},"data-v-285611cb",null).exports,N={name:"ProjectLaunch",props:{banner:{type:String,Required:!0},mode:{type:String,Required:!0},project:{type:Object,Required:!0}},methods:{submitForm:function(){var e=this;return _()(v.a.mark(function t(){var r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("access")),t.prev=1,t.next=4,k(r,e.mode,e.project.id,e.project.title,e.project.activity_time,e.project.activity_location,e.project.person_wanted,e.project.money_per_person,e.project.description);case 4:alert("项目已提交！"),e.$router.push("/projects"),t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(1),console.log(t.t0.response.data.detail),t.abrupt("return",null);case 12:case"end":return t.stop()}},t,e,[[1,8]])}))()}}},D={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"launch-project"},[r("h1",[e._v(e._s(e.banner))]),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"title"}},[e._v("项目名称")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.project.title,expression:"project.title"}],attrs:{type:"text",id:"title",required:""},domProps:{value:e.project.title},on:{input:function(t){t.target.composing||e.$set(e.project,"title",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"date"}},[e._v("日期")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.project.activity_time,expression:"project.activity_time"}],attrs:{type:"date",id:"date",required:""},domProps:{value:e.project.activity_time},on:{input:function(t){t.target.composing||e.$set(e.project,"activity_time",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"location"}},[e._v("地点")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.project.activity_location,expression:"project.activity_location"}],attrs:{type:"text",id:"location",required:""},domProps:{value:e.project.activity_location},on:{input:function(t){t.target.composing||e.$set(e.project,"activity_location",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"person"}},[e._v("所需人数")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.project.person_wanted,expression:"project.person_wanted"}],attrs:{type:"number",id:"person",required:""},domProps:{value:e.project.person_wanted},on:{input:function(t){t.target.composing||e.$set(e.project,"person_wanted",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"money"}},[e._v("人均报酬")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.project.money_per_person,expression:"project.money_per_person"}],attrs:{type:"number",id:"money",required:""},domProps:{value:e.project.money_per_person},on:{input:function(t){t.target.composing||e.$set(e.project,"money_per_person",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"description"}},[e._v("项目描述")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.project.description,expression:"project.description"}],attrs:{id:"description",required:""},domProps:{value:e.project.description},on:{input:function(t){t.target.composing||e.$set(e.project,"description",t.target.value)}}})]),e._v(" "),r("button",{attrs:{type:"submit"}},[e._v("提交")])])])},staticRenderFns:[]};var $=r("VU/8")(N,D,!1,function(e){r("6MWa")},"data-v-625fef19",null).exports,L={name:"ProjectDetail",components:{ProjectEdit:$},data:function(){return{banner:"编辑项目信息",mode:"edit",project:{id:"",title:"",publisherName:"",description:"",activity_time:"",activity_location:"",money_per_person:"",person_applied:"",person_wanted:"",relationship:""},user:{avatar:"",username:"",email:"",is_active:""},applied:!1,button_text_apply:"",editMode:!1}},created:function(){this.getInfo()},methods:{getInfo:function(){var e=this,t=window.location.href.match(/\/projects\/(\d+)$/);t?(this.project.id=t[1],console.log("Project ID:",this.project.id),function(e,t){return b.get(C+"/experiments/"+t+"/",{headers:{Authorization:"Bearer "+e}},{withCredentials:!0})}(JSON.parse(localStorage.getItem("access")),this.project.id).then(function(t){e.project=t.data,"applicant"==e.project.relationship?e.button_text_apply="取消申请":e.button_text_apply="申请参与",console.log("关系",e.project.relationship),console.log("文本",e.button_text_apply)}).catch(function(e){console.error("Error fetching project:",e)})):(console.log("未找到项目 ID"),alert("未找到项目"),this.$router.push("projects"))},applyForProject:function(){var e=this;return _()(v.a.mark(function t(){var r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("true"!=localStorage.getItem("loginFlag")){t.next=8;break}return r=JSON.parse(localStorage.getItem("access")),t.next=4,x(r,e.project.id).catch(function(e){console.error("Error Apply:",e)});case 4:alert("申请成功！"),location.reload(),t.next=10;break;case 8:alert("请登录以继续"),e.$router.push("/login");case 10:case"end":return t.stop()}},t,e)}))()},qualifyApplier:function(){this.$router.push("/projects/"+this.project.id+"/qualify")},changeEditMode:function(){this.editMode=!this.editMode}}},M={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.editMode?r("div",[r("button",{on:{click:e.changeEditMode}},[e._v("结束编辑")]),e._v(" "),r("ProjectEdit",{attrs:{project:e.project,banner:e.banner,mode:e.mode}})],1):r("div",{staticClass:"project-detail"},[r("img",{staticClass:"avatar",attrs:{src:e.project.publisherAvatar,alt:"Publisher Avatar"}}),e._v(" "),r("h2",[e._v(e._s(e.project.title))]),e._v(" "),r("p",[r("strong",[e._v("发布者：")]),e._v(e._s(e.project.creator))]),e._v(" "),r("p",[r("strong",[e._v("内容：")]),e._v(e._s(e.project.description))]),e._v(" "),r("p",[r("strong",[e._v("日期：")]),e._v(e._s(e.project.activity_time))]),e._v(" "),r("p",[r("strong",[e._v("地点：")]),e._v(e._s(e.project.activity_location))]),e._v(" "),r("p",[r("strong",[e._v("人均报酬：")]),e._v(e._s(e.project.money_per_person))]),e._v(" "),r("p",[r("strong",[e._v("人数：")]),e._v(e._s(e.project.person_already)+"/"+e._s(e.project.person_wanted))]),e._v(" "),"creator"==e.project.relationship?r("div",[r("button",{on:{click:e.changeEditMode}},[e._v("编辑实验信息")]),e._v(" "),r("button",{on:{click:e.qualifyApplier}},[e._v("审核候选人")])]):r("div",[r("button",{on:{click:e.applyForProject}},[e._v(e._s(e.button_text_apply))])])])},staticRenderFns:[]};var K=r("VU/8")(L,M,!1,function(e){r("tRXp")},"data-v-f3934cf4",null).exports,T={name:"ProjectLaunch",components:{ProjectEdit:$},data:function(){return{mode:"create",banner:"发起新项目",project:{id:"",title:"",description:"",activity_time:"",activity_location:"",money_per_person:"",person_wanted:""}}}},H={render:function(){var e=this.$createElement;return(this._self._c||e)("ProjectEdit",{attrs:{project:this.project,banner:this.banner,mode:this.mode}})},staticRenderFns:[]};var Q=r("VU/8")(T,H,!1,function(e){r("Bh49")},"data-v-dc67ee26",null).exports,X={name:"Project",props:{project:{type:Object,required:!0}}},J={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"project-item"},[r("h3",[e._v(e._s(e.project.title))]),e._v(" "),r("p",[r("strong",[e._v("日期：")]),e._v(e._s(e.project.activity_time))]),e._v(" "),r("p",[r("strong",[e._v("地点：")]),e._v(e._s(e.project.activity_location))]),e._v(" "),r("p",[r("strong",[e._v("人均报酬：")]),e._v(e._s(e.project.money_per_person))]),e._v(" "),r("p",[r("strong",[e._v("人数：")]),e._v(e._s(e.project.person_already)+"/"+e._s(e.project.person_wanted))])])},staticRenderFns:[]};var Z={name:"ProjectSearch",components:{ProjectDetail:K,Project:r("VU/8")(X,J,!1,function(e){r("XQ5Z")},"data-v-7c7711c6",null).exports},props:{mode:{type:String,Required:!0}},data:function(){return{searchKey:"",projects:[],tags:[],selectedTags:[],sortOrder:"asc",sortBy:"id",showTagBox:!1,showDetail:!1,selectedProject:null}},created:function(){this.fetchTags(),this.fetchProjects()},methods:{fetchProjects:function(){var e,t,r,s=this;if(console.log(this.searchKey,this.sortOrder,this.sortBy),console.log(this.mode),""==this.mode)(e=this.searchKey,t=this.sortBy,r=this.sortOrder,b.get(C+"/experiments/search/?keyword="+e+"&orderby="+t+"&sort="+r,{withCredentials:!0})).then(function(e){s.projects=e.data.results}).catch(function(e){console.error("Error fetching projects:",e)});else{var n=JSON.parse(localStorage.getItem("access"));"create"==this.mode&&function(e,t,r,s){return b.get(C+"/experiments/create/search/?keyword="+t+"&orderby="+r+"&sort="+s,{headers:{Authorization:"Bearer "+e}},{withCredentials:!0})}(n,this.searchKey,this.sortBy,this.sortOrder).then(function(e){s.projects=e.data.results}).catch(function(e){console.error("Error fetching projects:",e)}),"engage"==this.mode&&function(e,t,r,s){return b.get(C+"/relations/engage/search/?keyword="+t+"&orderby="+r+"&sort="+s,{headers:{Authorization:"Bearer "+e}},{withCredentials:!0})}(n,this.searchKey,this.sortBy,this.sortOrder).then(function(e){s.projects=e.data.results}).catch(function(e){console.error("Error fetching projects:",e)})}},fetchTags:function(){var e=this;b.get(C+"/relations/tags",{withCredentials:!0}).then(function(t){e.tags=t.data,console.log(e.tags)}).catch(function(e){console.error("Error fetching tags:",e)})},toggleTag:function(e){var t=this.selectedTags.indexOf(e);-1===t?this.selectedTags.push(e):this.selectedTags.splice(t,1),this.fetchProjects()},toggleTagBox:function(){this.showTagBox=!this.showTagBox},toggleSortOrder:function(){this.sortOrder="asc"===this.sortOrder?"desc":"asc",this.fetchProjects()},toggleSortBy:function(){this.sortBy="id"===this.sortBy?"time":"id",this.fetchProjects()},showProjectDetail:function(e){this.$router.push({path:"/projects/"+e.id,params:{projectId:e.id}})},launchProject:function(){this.$router.push("/projects/launch")}}},G={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"project-list"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKey,expression:"searchKey"}],attrs:{type:"text",placeholder:"搜索关键字..."},domProps:{value:e.searchKey},on:{input:function(t){t.target.composing||(e.searchKey=t.target.value)}}}),e._v(" "),r("button",{staticClass:"search-button",on:{click:function(t){return e.fetchProjects()}}},[e._v("搜索")]),e._v(" "),r("div",{staticClass:"sort-buttons"},[r("div",{staticClass:"sift-buttons"},[r("button",{staticClass:"tag-button",class:{active:e.showTagBox},on:{click:e.toggleTagBox}},[e._v("按标签筛选")])]),e._v(" "),r("div",{staticClass:"list-buttons"},[r("button",{staticClass:"sort-button",on:{click:e.toggleSortOrder}},[e._v(e._s("asc"===e.sortOrder?"顺序显示":"逆序显示"))]),e._v(" "),r("button",{staticClass:"sort-button",on:{click:e.toggleSortBy}},[e._v(e._s("id"===e.sortBy?"发布顺序":"时间顺序"))])])]),e._v(" "),e.showTagBox?r("div",{staticClass:"tag-box"},e._l(e.tags,function(t){return r("span",{class:{selected:e.selectedTags.includes(t)},on:{click:function(r){return e.toggleTag(t)}}},[e._v(e._s(t.name))])}),0):e._e(),e._v(" "),0===e.projects.length?r("div",[e._v("没有找到相关活动")]):r("div",e._l(e.projects,function(t){return r("div",{key:t.id,staticClass:"project-item",on:{click:function(r){return e.showProjectDetail(t)}}},[r("Project",{attrs:{project:t}})],1)}),0)])},staticRenderFns:[]};var W=r("VU/8")(Z,G,!1,function(e){r("8em/")},"data-v-fce86adc",null).exports,z={name:"UserApplied",components:{ProjectSearch:W},data:function(){return{mode:"engage"}}},Y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("ProjectSearch",{attrs:{mode:this.mode}})],1)},staticRenderFns:[]};var ee=r("VU/8")(z,Y,!1,function(e){r("Gojk")},"data-v-3097fb15",null).exports,te={name:"UserApplied",components:{ProjectSearch:W},data:function(){return{mode:"create"}}},re={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("ProjectSearch",{attrs:{mode:this.mode}})],1)},staticRenderFns:[]};var se=r("VU/8")(te,re,!1,function(e){r("guZ4")},"data-v-050652b3",null).exports,ne={name:"Projects",components:{ProjectSearch:W},data:function(){return{mode:""}},methods:{launchProject:function(){this.$router.push("/projects/launch")}}},oe={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("ProjectSearch",{attrs:{mode:e.mode}}),e._v(" "),r("button",{staticClass:"circle-button",on:{click:function(t){return e.launchProject()}}},[e._v("+")])],1)},staticRenderFns:[]};var ae=r("VU/8")(ne,oe,!1,function(e){r("HAIC")},"data-v-02aab1de",null).exports,ie={name:"Applier",props:{applier:{type:Object,required:!0},id:""},data:function(){return{status_text:""}},created:function(){"finish"==this.applier.status&&(this.status_text="已完成",this.button_text_qualify="已完成"),"to-qualify-user"==this.applier.status&&(this.status_text="待审核",this.button_text_qualify="资质审核通过"),"to-check-result"==this.applier.status&&(this.status_text="待完成",this.button_text_qualify="成果审核通过")},methods:{qualified:function(e){(function(e,t,r){return b.post(C+"/relations/qualify/volunteers/",{experiment:t,volunteer:r},{headers:{Authorization:"Bearer "+e}},{withCredentials:!0})})(JSON.parse(localStorage.getItem("access")),this.id,e.username).catch(function(e){console.error("Error qualify",e.response.data.detail)}),location.reload()}}},ce={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"applier-item"},[r("h3",[e._v(e._s(e.applier.username))]),e._v(" "),r("p",[e._v(e._s(e.applier.introduction))]),e._v(" "),r("p",[r("strong",[e._v("审核状态：")]),e._v(e._s(e.status_text))]),e._v(" "),r("button",{on:{click:function(t){return e.qualified(e.applier)}}},[e._v(e._s(e.button_text_qualify))])])},staticRenderFns:[]};var le={name:"Qualify",components:{Applier:r("VU/8")(ie,ce,!1,function(e){r("VKSc")},"data-v-5c75f764",null).exports},data:function(){return{id:"",appliers:[],button_text_qualify:"资质审核通过"}},created:function(){this.getInfo()},methods:{getInfo:function(){var e=window.location.href.match(/\/projects\/(\d+)\/qualify$/);e?(this.id=e[1],console.log("Project ID:",this.id),this.fetchAppliers()):(console.log("未找到项目 ID"),alert("未找到项目"),this.$router.push("projects"))},fetchAppliers:function(){var e=this;(function(e,t){return b.get(C+"/relations/volunteers/list/?experiment="+t,{headers:{Authorization:"Bearer "+e}},{withCredentials:!0})})(JSON.parse(localStorage.getItem("access")),this.id).then(function(t){e.appliers=t.data.results}).catch(function(e){console.error("Error fetching appliers:",e)})}}},ue={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"project-list"},[0===e.appliers.length?r("div",[e._v("暂无人申请")]):r("div",e._l(e.appliers,function(t){return r("div",{key:t.username,staticClass:"applier-item"},[r("Applier",{attrs:{applier:t,id:e.id}})],1)}),0)])},staticRenderFns:[]};var de=r("VU/8")(le,ue,!1,function(e){r("y7Fx")},"data-v-3a607fb9",null).exports;s.a.use(l.a);var pe=new l.a({routes:[{path:"/",redirect:"/home"},{path:"/home",name:"Home",component:d},{path:"/login",name:"Login",component:I},{path:"/register",name:"Register",component:E},{path:"/user",name:"User",component:O,meta:{requiresLogin:"true"}},{path:"/projects",name:"Projects",component:ae},{path:"/projects/launch",name:"ProjectLaunch",component:Q,meta:{requiresLogin:"true"}},{path:"/projects/:id",name:"ProjectDetail",component:K},{path:"/user/launched",name:"UserLaunched",component:se,meta:{requiresLogin:"true"}},{path:"/user/applied",name:"UserApplied",component:ee,meta:{requiresLogin:"true"}},{path:"/projects/:id/qualify",name:"Qualify",component:de,meta:{requiresLogin:"true"}}]});s.a.config.productionTip=!1,s.a.prototype.$axios=y.a,new s.a({el:"#app",router:pe,components:{App:c},template:"<App/>"}),pe.beforeEach(function(e,t,r){"true"==e.meta.requiresLogin?"true"==localStorage.getItem("loginFlag")?r():(alert("请登录以继续"),r("/login")):r()})},Sogh:function(e,t){},UGzv:function(e,t){},VKSc:function(e,t){},XQ5Z:function(e,t){},fkg4:function(e,t){},gQwh:function(e,t){},guZ4:function(e,t){},jXzV:function(e,t){},tRXp:function(e,t){},y7Fx:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.48613a0914605c8c2849.js.map